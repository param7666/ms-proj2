#Data source configuration for oracle
spring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver
spring.datasource.url=jdbc:oracle:thin:@localhost:1521:orcl
spring.datasource.username=parmeshwar
spring.datasource.password=12345


#JPA hibernate properties
spring.jpa.database-platform=org.hibernate.dialect.OracleDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true
spring.jpa.properties.hibernate.format_sql=true
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql=TRACE
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE


# Application Name
spring.application.name=order-service

# Server Port
server.port=8080



# ============================================
# RESILIENCE4J CIRCUIT BREAKER CONFIGURATION
# ============================================

# Circuit Breaker Instance Names (define multiple if needed)
# Example: inventoryService, paymentService, userService

# BootMSProj10-AccountServiceMS-BANK Circuit Breaker
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.register-health-indicator=true
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.sliding-window-size=10
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.wait-duration-in-open-state=10s
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.slow-call-rate-threshold=100
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.slow-call-duration-threshold=60s
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.automatic-transition-from-open-to-half-open-enabled=true

# BootMSProj10-TransactionServiceMS-BANK Service Circuit Breaker
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.register-health-indicator=true
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.sliding-window-size=10
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.wait-duration-in-open-state=15s
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.failure-rate-threshold=60
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.automatic-transition-from-open-to-half-open-enabled=true



# ============================================
# SPRING BOOT ACTUATOR CONFIGURATION
# ============================================

# Expose all actuator endpoints (for dev/testing - restrict in production)
management.endpoints.web.exposure.include=*

# OR expose specific endpoints only (recommended for production)
# management.endpoints.web.exposure.include=health,info,metrics,circuitbreakers,circuitbreakerevents,prometheus,refresh

# Actuator base path
management.endpoints.web.base-path=/actuator

# Enable/Disable specific endpoints
management.endpoint.health.enabled=true
management.endpoint.info.enabled=true
management.endpoint.metrics.enabled=true
management.endpoint.circuitbreakers.enabled=true
management.endpoint.circuitbreakerevents.enabled=true
management.endpoint.refresh.enabled=true

# Health endpoint details
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always

# Include circuit breaker health in overall health
management.health.circuitbreakers.enabled=true
management.health.ratelimiters.enabled=true


# Metrics export (optional - for Prometheus)
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# ============================================
# LOGGING
# ============================================
logging.level.io.github.resilience4j=DEBUG
logging.level.org.springframework.cloud=DEBUG

# ============================================
# ADDITIONAL RESILIENCE4J CONFIGS
# ============================================

# Event consumer buffer size
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.event-consumer-buffer-size=10


# Ignore exceptions (don't count as failure)
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.ignore-exceptions=java.lang.IllegalArgumentException

# Sliding window type: COUNT_BASED or TIME_BASED
resilience4j.circuitbreaker.instances.BootMSProj10-TransactionServiceMS-BANK.sliding-window-type=COUNT_BASED


# Event consumer buffer size
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.event-consumer-buffer-size=10


# Ignore exceptions (don't count as failure)
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.ignore-exceptions=java.lang.IllegalArgumentException

# Sliding window type: COUNT_BASED or TIME_BASED
resilience4j.circuitbreaker.instances.BootMSProj10-AccountServiceMS-BANK.sliding-window-type=COUNT_BASED


